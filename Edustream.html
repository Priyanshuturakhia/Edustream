<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduStream Platform Prototype</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
      // Custom Tailwind Configuration for the prototype
      tailwind.config = {
        darkMode: 'class', // Enable dark mode via a class on the <html> tag
        theme: {
          extend: {
            colors: {
              'brand-primary': '#0891b2', // A nice cyan
              'brand-secondary': '#6366f1', // A cool indigo
              'dark-bg': '#111827',
              'dark-card': '#1f2937',
            }
          }
        }
      }
    </script>
    <style>
        /* Simple transition for dark mode */
        body, .bg-white, .bg-dark-bg, .bg-dark-card {
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-dark-bg">

    <div id="root"></div>

    <script type="text/babel">
    //================================================
    //== 1. MOCK DATA (Simulating a Backend API)
    //================================================
    const mockUser = {
        name: "Priyanshu Turakhia",
        email: "alex.j@example.com",
        avatarUrl: "https://share.google/images/FnIWrgbXa4n6JN0aD"
    };

    const mockCourses = [
        { id: 1, title: "Modern JavaScript from Scratch", instructor: "Brad Traversy", progress: 75, imageUrl: "https://i.pravatar.cc/300?u=course1" },
        { id: 2, title: "Laravel 11: The Complete Guide", instructor: "Taylor Otwell", progress: 40, imageUrl: "https://i.pravatar.cc/300?u=course2" },
        { id: 3, title: "Advanced Tailwind CSS", instructor: "Adam Wathan", progress: 95, imageUrl: "https://i.pravatar.cc/300?u=course3" },
        { id: 4, title: "React for the Future", instructor: "Dan Abramov", progress: 15, imageUrl: "https://i.pravatar.cc/300?u=course4" },
    ];
    
    const mockDashboardData = {
        stats: {
            coursesInProgress: 4,
            completedCourses: 1,
            hoursLearned: 42
        },
        activity: [
            { id: 1, action: 'Completed a quiz in "Advanced Tailwind CSS"', time: "2h ago"},
            { id: 2, action: 'Started lesson 5 of "Laravel 11"', time: "1d ago"},
            { id: 3, action: 'Enrolled in "React for the Future"', time: "3d ago"},
        ],
        chartData: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Modules Completed',
                data: [5, 9, 7, 11, 8, 13],
                backgroundColor: 'rgba(8, 145, 178, 0.6)',
                borderColor: 'rgba(8, 145, 178, 1)',
                borderWidth: 1
            }]
        }
    };


    //================================================
    //== 2. UI ICONS (SVG Components)
    //================================================
    const IconBookOpen = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>;
    const IconChartBar = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>;
    const IconSun = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>;
    const IconMoon = () => <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>;


    //================================================
    //== 3. REACT COMPONENTS
    //================================================

    // --- Chart Component ---
    // A wrapper around Chart.js for use in React
    function BarChart({ chartData }) {
        const chartRef = React.useRef(null);

        React.useEffect(() => {
            if (chartRef.current) {
                const chartInstance = new Chart(chartRef.current, {
                    type: 'bar',
                    data: chartData,
                    options: {
                        scales: { y: { beginAtZero: true } },
                        maintainAspectRatio: false,
                    },
                });

                // Cleanup function to destroy chart instance on component unmount
                return () => chartInstance.destroy();
            }
        }, [chartData]);

        return <div className="relative h-64"><canvas ref={chartRef}></canvas></div>;
    }

    // --- Theme Toggle Component ---
    function ThemeToggle() {
        // Initialize state from localStorage or default to false (light mode)
        const [isDarkMode, setIsDarkMode] = React.useState(
            () => localStorage.getItem('theme') === 'dark'
        );

        // Effect to update the DOM and localStorage when the state changes
        React.useEffect(() => {
            if (isDarkMode) {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            }
        }, [isDarkMode]);

        return (
            <button
                onClick={() => setIsDarkMode(!isDarkMode)}
                className="p-2 rounded-full text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700 dark:text-gray-400"
            >
                {isDarkMode ? <IconSun /> : <IconMoon />}
            </button>
        );
    }
    
    // --- Course Card Component ---
    function CourseCard({ course }) {
      return (
        <div className="bg-white dark:bg-dark-card rounded-lg shadow-md overflow-hidden transform hover:-translate-y-1 transition-transform duration-300">
          <img src={course.imageUrl} alt={course.title} className="w-full h-40 object-cover" />
          <div className="p-4">
            <h3 className="text-lg font-semibold text-gray-800 dark:text-white">{course.title}</h3>
            <p className="text-sm text-gray-500 dark:text-gray-400 mb-4">by {course.instructor}</p>
            <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
              <div 
                className="bg-brand-primary h-2.5 rounded-full" 
                style={{ width: `${course.progress}%` }}>
              </div>
            </div>
            <p className="text-xs text-right mt-1 text-gray-600 dark:text-gray-300">{course.progress}% Complete</p>
          </div>
        </div>
      );
    }

    // --- Header Component ---
    function Header({ user, onLogout }) {
        return (
            <header className="bg-white dark:bg-dark-card shadow-sm sticky top-0 z-10">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div className="flex justify-between items-center h-16">
                        <div className="flex items-center space-x-2">
                            <IconBookOpen />
                            <span className="text-2xl font-bold text-gray-900 dark:text-white">EduStream</span>
                        </div>
                        <div className="flex items-center space-x-4">
                            <ThemeToggle />
                            <div className="flex items-center space-x-3">
                                <img className="h-9 w-9 rounded-full" src={user.avatarUrl} alt="User avatar" />
                                <span className="text-gray-700 dark:text-gray-300 hidden sm:block">{user.name}</span>
                            </div>
                            <button
                                onClick={onLogout}
                                className="px-4 py-2 text-sm font-medium text-white bg-brand-secondary rounded-md hover:bg-opacity-90"
                            >
                                Logout
                            </button>
                        </div>
                    </div>
                </div>
            </header>
        );
    }

    // --- Dashboard Page ---
    function DashboardPage() {
        const [activeTab, setActiveTab] = React.useState('dashboard');

        return (
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <h1 className="text-3xl font-bold text-gray-900 dark:text-white mb-6">Welcome back, {mockUser.name}!</h1>
                
                {/* Tab Navigation */}
                <div className="border-b border-gray-200 dark:border-gray-700 mb-6">
                    <nav className="-mb-px flex space-x-8" aria-label="Tabs">
                        <button
                            onClick={() => setActiveTab('dashboard')}
                            className={`${activeTab === 'dashboard' ? 'border-brand-primary text-brand-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}
                        >
                            Dashboard
                        </button>
                        <button
                            onClick={() => setActiveTab('courses')}
                            className={`${activeTab === 'courses' ? 'border-brand-primary text-brand-primary' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}
                        >
                            My Courses
                        </button>
                    </nav>
                </div>
                
                {/* Tab Content */}
                <div>
                    {activeTab === 'dashboard' && <DashboardContent />}
                    {activeTab === 'courses' && <CoursesContent />}
                </div>
            </div>
        );
    }

    // --- Dashboard Tab Content ---
    function DashboardContent() {
      const { stats, activity, chartData } = mockDashboardData;
      return (
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Left Column: Stats and Activity */}
          <div className="lg:col-span-2 space-y-6">
            {/* Stats Cards */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div className="bg-white dark:bg-dark-card p-6 rounded-lg shadow"><p className="text-sm text-gray-500 dark:text-gray-400">Courses in Progress</p><p className="text-3xl font-bold text-gray-900 dark:text-white">{stats.coursesInProgress}</p></div>
              <div className="bg-white dark:bg-dark-card p-6 rounded-lg shadow"><p className="text-sm text-gray-500 dark:text-gray-400">Completed Courses</p><p className="text-3xl font-bold text-gray-900 dark:text-white">{stats.completedCourses}</p></div>
              <div className="bg-white dark:bg-dark-card p-6 rounded-lg shadow"><p className="text-sm text-gray-500 dark:text-gray-400">Total Hours Learned</p><p className="text-3xl font-bold text-gray-900 dark:text-white">{stats.hoursLearned}</p></div>
            </div>
            
            {/* Chart */}
            <div className="bg-white dark:bg-dark-card p-6 rounded-lg shadow">
              <h3 className="text-lg font-semibold text-gray-800 dark:text-white mb-4">Learning Progress</h3>
              <BarChart chartData={chartData} />
            </div>
          </div>
          
          {/* Right Column: Recent Activity */}
          <div className="bg-white dark:bg-dark-card p-6 rounded-lg shadow">
            <h3 className="text-lg font-semibold text-gray-800 dark:text-white mb-4">Recent Activity</h3>
            <ul className="space-y-4">
              {activity.map(item => (
                <li key={item.id} className="flex items-start space-x-3">
                  <div className="flex-shrink-0 h-2.5 w-2.5 rounded-full bg-brand-primary mt-1.5"></div>
                  <div>
                    <p className="text-sm text-gray-700 dark:text-gray-300">{item.action}</p>
                    <p className="text-xs text-gray-500 dark:text-gray-400">{item.time}</p>
                  </div>
                </li>
              ))}
            </ul>
          </div>
        </div>
      );
    }

    // --- Courses Tab Content ---
    function CoursesContent() {
      return (
        <div>
          <h2 className="text-2xl font-bold text-gray-900 dark:text-white mb-4">Your Enrolled Courses</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {mockCourses.map(course => <CourseCard key={course.id} course={course} />)}
          </div>
        </div>
      );
    }
    
    // --- Login Page Component ---
    function LoginPage({ onLogin }) {
        const [email, setEmail] = React.useState('');
        const [password, setPassword] = React.useState('');
        const [error, setError] = React.useState('');

        const handleSubmit = (e) => {
            e.preventDefault();
            // SIMULATED validation and authentication
            if (email === "user@edustream.com" && password === "password123") {
                setError('');
                onLogin(mockUser);
            } else {
                setError("Invalid credentials. Use user@edustream.com and password123");
            }
        };

        return (
            <div className="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-dark-bg">
                <div className="max-w-md w-full bg-white dark:bg-dark-card p-8 rounded-lg shadow-lg">
                    <div className="flex justify-center mb-6">
                       <div className="flex items-center space-x-2">
                          <IconBookOpen />
                          <span className="text-3xl font-bold text-gray-900 dark:text-white">EduStream</span>
                       </div>
                    </div>
                    <h2 className="text-2xl font-bold text-center text-gray-800 dark:text-white mb-1">Welcome Back</h2>
                    <p className="text-center text-gray-500 dark:text-gray-400 mb-6">Sign in to continue learning</p>
                    <form onSubmit={handleSubmit}>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email Address</label>
                            <input
                                type="email"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                placeholder="you@example.com"
                            />
                        </div>
                        <div className="mb-6">
                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
                            <input
                                type="password"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                className="w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                                placeholder="••••••••"
                            />
                        </div>
                        {error && <p className="text-red-500 text-sm mb-4 text-center">{error}</p>}
                        <button type="submit" className="w-full bg-brand-primary text-white py-2 rounded-md font-semibold hover:bg-opacity-90 transition-colors">
                            Sign In
                        </button>
                    </form>
                </div>
            </div>
        );
    }


    //================================================
    //== 4. MAIN APP COMPONENT
    //================================================
    function App() {
        const [user, setUser] = React.useState(null);

        // This function will be passed to the LoginPage
        const handleLogin = (loggedInUser) => {
            setUser(loggedInUser);
        };
        
        // This function will be passed to the Header
        const handleLogout = () => {
            setUser(null);
        };
        
        // Conditional rendering based on authentication state
        if (!user) {
            return <LoginPage onLogin={handleLogin} />;
        }

        return (
            <div>
                <Header user={user} onLogout={handleLogout} />
                <main>
                    <DashboardPage />
                </main>
            </div>
        );
    }

    // Render the main App component into the #root div
    ReactDOM.render(<App />, document.getElementById('root'));

    </script>
</body>
</html>